import { decryptRsaFromHex } from "./crypto";
import { waitForTunnel } from "./waitForTunnel";

// test data
// privatePemBase64: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBMm9CUUhlRERKYUtsQXdhWGRLd0p2ZTNQK3o2RWJYRTY3S0xDNVA3ZUlQMEQ0OXFGCnNsSStZMUtsVm0vRWh1bXl1QVF5SWViZDc1aXJXRlVzeVIvRnFwc3VzYlhhNzRGNDQybHVWZ3NsN0NvTVVKQjEKbTVlL0NwaE1ETHUzT3hyY05VSGJxRmcxYnV4V0FoNHliOTF4aGpNdU5IWW5IdkIxaTF2SGYyaWZaRnRhdFRRcgpqaERnY2pDc2tVb0d3Ky9sMmNSRU8wTzlrNEtSNFI2QkVuWnpEVkRRRnRwT21NM2ErNitzOU5BMVVjSEx5TlYwCjJVVDVNdnVmODhndmdtYUdRZjh1bDNUZndndEUxa2hkbnhSeHZhajJNNDZzUlMwWXd1VDJnN1dRQzArYUpFTU0KNWRDUzc0YUpSNEgvL2JOS3QvQk11TkFJZVQrVkltcG12M2JjZ1FJREFRQUJBb0lCQVFDOVZQb1hLYTl2YVNPNwpIM2NWcmcweSttS0J2b1pabndnRURIVDhvS3d4d1l3aFlEVUJjNnFEdmhWdWRLTENsTFk4SmNhYkFjWEYyM0I5CnRqQjhobjl0ZWRKWVF0QlhRTVZUcVFQbW92cFZUWW9tTlViemIrWW1kQmxSMzBiQ2ZGL2I5aGswSWxzS3B0ZFEKTm9KVjFIaU9aTUxneXBEVGltRVFSSkwxbjk2ZHdjRk1mMmxVek1HLzh6b1NCTG1OQWhLTFFDYUlRWEZyNlQyaApPNVN1MDBmVkZBb2RSZGJpVW43UFI3bW5kMGpmU3pMSUc3Smo3emNvWncxYWQ4THVmU241WU1tUXRpSWV0S1JYClpGOXpWdUJScytvWWd2N2p2UHBqdEhsL3NGMHZkQlIrZFgvQUxZVXhYZ2JxejVkWHpoU0IreFVGZXlORkc1OWUKZGNwcXFCTUJBb0dCQU84MmI4OTRaV2dUYXZIbWdlUWY2enpRaWYvUVBuZnNuMXJydWVaOG00T1U1VE5yVXVERQpKbXZLMVN2ZFlrK3VodTA1dGwxbEIyN0dOZjRJMTFzY05UUXcxOGV3TktiOC9Gd2lVWkFlUGl1WkVRdE5rZXp0CnhyN1lqRmlBbjc4R0pXQTFESi8rVEZKaitlVndRZUREY3NCS0pveldJN05DZEpwRUNZWndHS0w1QW9HQkFPblYKeVVHVG9iMU5vem1TRUx2bm1vL3BXbHNzTGVQOER3SGx0NzJjVkRCQjl1QnBCdnlObFhPTDYrL2RtTFFTK1V1MQpzdDdWMXhycXR5VVg4WXR1Z1VXMEllek5VbjVRdUxQUXBsVE1hcVNGQzZFekpDWm1YZkJSSzJ4MW5hNzZBL1p5Cmd6SVRsTDdHSTRmQzRZMTFzbmNpWmZKeHozQVFBdGREbjJ6WmFOL0pBb0dBYmt6d2szN1ZhMzhBb2hnQ3JyalYKRkU2b1F5KzNqajZxWUJjdnVncWMvcmhLVTBKYWpjK0VVOUhNSjVUR1B5MmZnNFZJQkpxUUtkRDFsblJuTU5pNQo0NTNkOFhMYlpHQmswT3IySnZqNis4bHhwWCtZR09LdThOTVRLNy9yYVA2aGYxSVd4ek5QNS9HM2ljY1FhVjVWCjdEcUV1ZzRIbWlHN2VHS0U3ZHVFVUtrQ2dZQTk1YjEwZ21QWi9HY3NvaUdUMiticUdWYzFzeWdpcFdKRG1rOWMKL2JpN1hYckFSSXo0NVhHZU9IZW44dnl0RGlpM2hjMW5keXVOa0h3U2NaZ2ExSkdicGVjbEMrUytVeGZSWVhYbQpGSVpXTG5HNXBoUDNwamxQbCt6cXRPZWNuY25XdnRGRHZETXZuTHRqQUk4OEp0K3E4WXdTOVZWMzBJVXYvbEtCCk9idXRJUUtCZ0ZTQi9HWFpsYlRQQXNLTXR0TmFCL292d0tieEE5bHVodUdlNzk0Y1BWMXZDSllIY3ZXNXVPeXYKMlZhZ3FBQzRHQ1VvRkZ4eTYwNnVJK3ZoZTJ4L3I4RGJoMVd6enVXSDdyQXZRUFUrZzYyalFXclpXa2E3K0prSgplMGFDalFmK0R6MGRBTWlCMzdtT01GVHhrV2VndVNONTJJMzk4NWZrQU8wSHVUTkVCRXRoCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0t
// publicPemBase64: LS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS0KTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUEyb0JRSGVEREphS2xBd2FYZEt3Sgp2ZTNQK3o2RWJYRTY3S0xDNVA3ZUlQMEQ0OXFGc2xJK1kxS2xWbS9FaHVteXVBUXlJZWJkNzVpcldGVXN5Ui9GCnFwc3VzYlhhNzRGNDQybHVWZ3NsN0NvTVVKQjFtNWUvQ3BoTURMdTNPeHJjTlVIYnFGZzFidXhXQWg0eWI5MXgKaGpNdU5IWW5IdkIxaTF2SGYyaWZaRnRhdFRRcmpoRGdjakNza1VvR3crL2wyY1JFTzBPOWs0S1I0UjZCRW5aegpEVkRRRnRwT21NM2ErNitzOU5BMVVjSEx5TlYwMlVUNU12dWY4OGd2Z21hR1FmOHVsM1Rmd2d0RTFraGRueFJ4CnZhajJNNDZzUlMwWXd1VDJnN1dRQzArYUpFTU01ZENTNzRhSlI0SC8vYk5LdC9CTXVOQUllVCtWSW1wbXYzYmMKZ1FJREFRQUIKLS0tLS1FTkQgUFVCTElDIEtFWS0tLS0t

(async () => {
  console.log(
    await waitForTunnel({
      gossipAddress: "0xCA302f663d7E4F9D4eFD6B57A0586c9c39ED0033",
      privatePemBase64:
        "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBMm9CUUhlRERKYUtsQXdhWGRLd0p2ZTNQK3o2RWJYRTY3S0xDNVA3ZUlQMEQ0OXFGCnNsSStZMUtsVm0vRWh1bXl1QVF5SWViZDc1aXJXRlVzeVIvRnFwc3VzYlhhNzRGNDQybHVWZ3NsN0NvTVVKQjEKbTVlL0NwaE1ETHUzT3hyY05VSGJxRmcxYnV4V0FoNHliOTF4aGpNdU5IWW5IdkIxaTF2SGYyaWZaRnRhdFRRcgpqaERnY2pDc2tVb0d3Ky9sMmNSRU8wTzlrNEtSNFI2QkVuWnpEVkRRRnRwT21NM2ErNitzOU5BMVVjSEx5TlYwCjJVVDVNdnVmODhndmdtYUdRZjh1bDNUZndndEUxa2hkbnhSeHZhajJNNDZzUlMwWXd1VDJnN1dRQzArYUpFTU0KNWRDUzc0YUpSNEgvL2JOS3QvQk11TkFJZVQrVkltcG12M2JjZ1FJREFRQUJBb0lCQVFDOVZQb1hLYTl2YVNPNwpIM2NWcmcweSttS0J2b1pabndnRURIVDhvS3d4d1l3aFlEVUJjNnFEdmhWdWRLTENsTFk4SmNhYkFjWEYyM0I5CnRqQjhobjl0ZWRKWVF0QlhRTVZUcVFQbW92cFZUWW9tTlViemIrWW1kQmxSMzBiQ2ZGL2I5aGswSWxzS3B0ZFEKTm9KVjFIaU9aTUxneXBEVGltRVFSSkwxbjk2ZHdjRk1mMmxVek1HLzh6b1NCTG1OQWhLTFFDYUlRWEZyNlQyaApPNVN1MDBmVkZBb2RSZGJpVW43UFI3bW5kMGpmU3pMSUc3Smo3emNvWncxYWQ4THVmU241WU1tUXRpSWV0S1JYClpGOXpWdUJScytvWWd2N2p2UHBqdEhsL3NGMHZkQlIrZFgvQUxZVXhYZ2JxejVkWHpoU0IreFVGZXlORkc1OWUKZGNwcXFCTUJBb0dCQU84MmI4OTRaV2dUYXZIbWdlUWY2enpRaWYvUVBuZnNuMXJydWVaOG00T1U1VE5yVXVERQpKbXZLMVN2ZFlrK3VodTA1dGwxbEIyN0dOZjRJMTFzY05UUXcxOGV3TktiOC9Gd2lVWkFlUGl1WkVRdE5rZXp0CnhyN1lqRmlBbjc4R0pXQTFESi8rVEZKaitlVndRZUREY3NCS0pveldJN05DZEpwRUNZWndHS0w1QW9HQkFPblYKeVVHVG9iMU5vem1TRUx2bm1vL3BXbHNzTGVQOER3SGx0NzJjVkRCQjl1QnBCdnlObFhPTDYrL2RtTFFTK1V1MQpzdDdWMXhycXR5VVg4WXR1Z1VXMEllek5VbjVRdUxQUXBsVE1hcVNGQzZFekpDWm1YZkJSSzJ4MW5hNzZBL1p5Cmd6SVRsTDdHSTRmQzRZMTFzbmNpWmZKeHozQVFBdGREbjJ6WmFOL0pBb0dBYmt6d2szN1ZhMzhBb2hnQ3JyalYKRkU2b1F5KzNqajZxWUJjdnVncWMvcmhLVTBKYWpjK0VVOUhNSjVUR1B5MmZnNFZJQkpxUUtkRDFsblJuTU5pNQo0NTNkOFhMYlpHQmswT3IySnZqNis4bHhwWCtZR09LdThOTVRLNy9yYVA2aGYxSVd4ek5QNS9HM2ljY1FhVjVWCjdEcUV1ZzRIbWlHN2VHS0U3ZHVFVUtrQ2dZQTk1YjEwZ21QWi9HY3NvaUdUMiticUdWYzFzeWdpcFdKRG1rOWMKL2JpN1hYckFSSXo0NVhHZU9IZW44dnl0RGlpM2hjMW5keXVOa0h3U2NaZ2ExSkdicGVjbEMrUytVeGZSWVhYbQpGSVpXTG5HNXBoUDNwamxQbCt6cXRPZWNuY25XdnRGRHZETXZuTHRqQUk4OEp0K3E4WXdTOVZWMzBJVXYvbEtCCk9idXRJUUtCZ0ZTQi9HWFpsYlRQQXNLTXR0TmFCL292d0tieEE5bHVodUdlNzk0Y1BWMXZDSllIY3ZXNXVPeXYKMlZhZ3FBQzRHQ1VvRkZ4eTYwNnVJK3ZoZTJ4L3I4RGJoMVd6enVXSDdyQXZRUFUrZzYyalFXclpXa2E3K0prSgplMGFDalFmK0R6MGRBTWlCMzdtT01GVHhrV2VndVNONTJJMzk4NWZrQU8wSHVUTkVCRXRoCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0t",
    })
  );
})();

console.log(
  "test past data",
  decryptRsaFromHex({
    encryptedHex:
      "0x8d93bbe4a08936542dcb17d65b769f3d26eee9921c7775ba84b205e1466fcd23c4f9562aba15bb3d9bdc3c9a1e8d418ca382de08b837fdea92dbcaf70e73422b3926ae81d5b6b0dce03803d04fbe3f47843106375f7dea0334f3526d80db0756eb421a26e1224aa4286880e261fda346432d28e82bfdf08a3a2912f0ab92860b4bbc461f0891d04f0e0cfe9753264325c8823fd124550b770d8662635ebd672c22a7c3cdea577c2af20a4cd76128ae7c121e1b7e3e8873708bac2e13f0eb7590d38336c65bd33e1ce77e0bd7634c396436effc87d57d05b4cc2b67a20f9fd609fda3c7a43dfbdc23b3569ad7e8265d2f4bda34219afb7a43e87a54a719ad2e6c",
    privatePemBase64:
      "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBMm9CUUhlRERKYUtsQXdhWGRLd0p2ZTNQK3o2RWJYRTY3S0xDNVA3ZUlQMEQ0OXFGCnNsSStZMUtsVm0vRWh1bXl1QVF5SWViZDc1aXJXRlVzeVIvRnFwc3VzYlhhNzRGNDQybHVWZ3NsN0NvTVVKQjEKbTVlL0NwaE1ETHUzT3hyY05VSGJxRmcxYnV4V0FoNHliOTF4aGpNdU5IWW5IdkIxaTF2SGYyaWZaRnRhdFRRcgpqaERnY2pDc2tVb0d3Ky9sMmNSRU8wTzlrNEtSNFI2QkVuWnpEVkRRRnRwT21NM2ErNitzOU5BMVVjSEx5TlYwCjJVVDVNdnVmODhndmdtYUdRZjh1bDNUZndndEUxa2hkbnhSeHZhajJNNDZzUlMwWXd1VDJnN1dRQzArYUpFTU0KNWRDUzc0YUpSNEgvL2JOS3QvQk11TkFJZVQrVkltcG12M2JjZ1FJREFRQUJBb0lCQVFDOVZQb1hLYTl2YVNPNwpIM2NWcmcweSttS0J2b1pabndnRURIVDhvS3d4d1l3aFlEVUJjNnFEdmhWdWRLTENsTFk4SmNhYkFjWEYyM0I5CnRqQjhobjl0ZWRKWVF0QlhRTVZUcVFQbW92cFZUWW9tTlViemIrWW1kQmxSMzBiQ2ZGL2I5aGswSWxzS3B0ZFEKTm9KVjFIaU9aTUxneXBEVGltRVFSSkwxbjk2ZHdjRk1mMmxVek1HLzh6b1NCTG1OQWhLTFFDYUlRWEZyNlQyaApPNVN1MDBmVkZBb2RSZGJpVW43UFI3bW5kMGpmU3pMSUc3Smo3emNvWncxYWQ4THVmU241WU1tUXRpSWV0S1JYClpGOXpWdUJScytvWWd2N2p2UHBqdEhsL3NGMHZkQlIrZFgvQUxZVXhYZ2JxejVkWHpoU0IreFVGZXlORkc1OWUKZGNwcXFCTUJBb0dCQU84MmI4OTRaV2dUYXZIbWdlUWY2enpRaWYvUVBuZnNuMXJydWVaOG00T1U1VE5yVXVERQpKbXZLMVN2ZFlrK3VodTA1dGwxbEIyN0dOZjRJMTFzY05UUXcxOGV3TktiOC9Gd2lVWkFlUGl1WkVRdE5rZXp0CnhyN1lqRmlBbjc4R0pXQTFESi8rVEZKaitlVndRZUREY3NCS0pveldJN05DZEpwRUNZWndHS0w1QW9HQkFPblYKeVVHVG9iMU5vem1TRUx2bm1vL3BXbHNzTGVQOER3SGx0NzJjVkRCQjl1QnBCdnlObFhPTDYrL2RtTFFTK1V1MQpzdDdWMXhycXR5VVg4WXR1Z1VXMEllek5VbjVRdUxQUXBsVE1hcVNGQzZFekpDWm1YZkJSSzJ4MW5hNzZBL1p5Cmd6SVRsTDdHSTRmQzRZMTFzbmNpWmZKeHozQVFBdGREbjJ6WmFOL0pBb0dBYmt6d2szN1ZhMzhBb2hnQ3JyalYKRkU2b1F5KzNqajZxWUJjdnVncWMvcmhLVTBKYWpjK0VVOUhNSjVUR1B5MmZnNFZJQkpxUUtkRDFsblJuTU5pNQo0NTNkOFhMYlpHQmswT3IySnZqNis4bHhwWCtZR09LdThOTVRLNy9yYVA2aGYxSVd4ek5QNS9HM2ljY1FhVjVWCjdEcUV1ZzRIbWlHN2VHS0U3ZHVFVUtrQ2dZQTk1YjEwZ21QWi9HY3NvaUdUMiticUdWYzFzeWdpcFdKRG1rOWMKL2JpN1hYckFSSXo0NVhHZU9IZW44dnl0RGlpM2hjMW5keXVOa0h3U2NaZ2ExSkdicGVjbEMrUytVeGZSWVhYbQpGSVpXTG5HNXBoUDNwamxQbCt6cXRPZWNuY25XdnRGRHZETXZuTHRqQUk4OEp0K3E4WXdTOVZWMzBJVXYvbEtCCk9idXRJUUtCZ0ZTQi9HWFpsYlRQQXNLTXR0TmFCL292d0tieEE5bHVodUdlNzk0Y1BWMXZDSllIY3ZXNXVPeXYKMlZhZ3FBQzRHQ1VvRkZ4eTYwNnVJK3ZoZTJ4L3I4RGJoMVd6enVXSDdyQXZRUFUrZzYyalFXclpXa2E3K0prSgplMGFDalFmK0R6MGRBTWlCMzdtT01GVHhrV2VndVNONTJJMzk4NWZrQU8wSHVUTkVCRXRoCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0t",
  })
);
